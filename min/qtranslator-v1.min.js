"use strict";import typechecked from"https://gustavlindberg99.github.io/Typecheck.js/min/typecheck-v1.min.js";const translators=[];class Translation{sourceText;translation;disambiguation}export class QObject{static tr(t/*: String */,s/*: String | null */=null,a/*: Number | null */=null){for(let e of translators){const r=e.translate("lupdate-js",t,s,a);if(r!==t){return r}}if(a!==null){return t.replace(/%n/g,a)}return t}}QObject=typechecked(QObject);export class QTranslator extends QObject{#filePath="";#language="";#translationsByContext=new Map;filePath(){return this.#filePath}isEmpty(){return this.#filePath===""}language(){return this.#language}async load(s/*: String */){const t=new XMLHttpRequest;t.open("GET",s,true);t.send(null);await new Promise(e=>{t.onload=t.onerror=e});if(Math.floor(t.status/100)!==2){console.error("Could not load file "+s+": Server responded with code "+t.status);return false}const a=(new DOMParser).parseFromString(t.responseText,"text/xml");const e=a.querySelector("parsererror > div")?.textContent??null;if(e!==null){if(s.endsWith(".qm")){console.error("Could not load file "+s+": QTranslator.load() expects a TS file as argument, but a QM file was given.")}else{console.error("Could not load file "+s+": Content is not valid XML: "+e)}return false}if(a.documentElement.tagName!=="TS"){console.error("Could not load file "+s+": Unexpected tag <"+a.documentElement.tagName+">.");return false}let r=new Map;for(let e of a.documentElement.childNodes){if(!(e instanceof Element)){continue}if(e.tagName!=="context"){console.error("Could not load file "+s+": Unexpected tag <"+e.tagName+">.");return false}const c=e.querySelector("name")?.textContent??"";r.set(c,[]);for(let t of e.querySelectorAll("message")){let e=new Translation;e.sourceText=t.querySelector("source")?.textContent;if(e.sourceText===undefined){console.error("Could not load file "+s+": Source text missing.");return false}e.disambiguation=t.querySelector("comment")?.textContent??"";if(t.getAttribute("numerus")==="yes"){e.translation=[...t.querySelectorAll("translation > numerusform")].map(e=>e.textContent)}else{e.translation=t.querySelector("translation")?.textContent??""}r.get(c).push(e)}}const n=a.documentElement.getAttribute("language")??"";if(this.#plural(0)===null){console.error("Could not load file "+s+": Unknown language "+n+".");return false}this.#filePath=s;this.#language=n;this.#translationsByContext=r;return true}translate(e/*: String */,t/*: String */,s/*: String | null */=null,a/*: Number | null */=null){if(this.isEmpty()){console.warn("Calling translate on an empty QTranslator. Did you forget to call translator.load() or did you call it without await?")}const r=(this.#translationsByContext.get(e)??[]).find(e=>e.sourceText===t&&e.disambiguation===(s??"")&&(a===null?typeof e.translation==="string":e.translation instanceof Array));if(r===undefined||r.translation===""){if(a!==null){return t.replace(/%n/g,a)}else{return t}}else if(a===null){return r.translation}else{const n=Math.min(this.#plural(a),r.translation.length-1);const c=r.translation[n].replace(/%n/g,a);if(c===""){return t.replace(/%n/g,a)}else{return c}}}#plural(e/*: Number */){switch(this.language().split("_")[0]){case"aa":case"ab":case"af":case"am":case"as":case"az":case"ba":case"bg":case"bn":case"ca":case"co":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hi":case"ia":case"it":case"ka":case"kk":case"kl":case"kn":case"ks":case"ku":case"kw":case"ky":case"la":case"lb":case"ln":case"lo":case"mg":case"ml":case"mn":case"mr":case"nb":case"ne":case"nl":case"nn":case"nso":case"oc":case"or":case"pa":case"ps":case"qu":case"rm":case"rn":case"rw":case"sd":case"si":case"sn":case"so":case"sq":case"ss":case"st":case"sv":case"sw":case"ta":case"te":case"tg":case"tk":case"tn":case"to":case"ts":case"ug":case"ur":case"uz":case"vo":case"wo":case"xh":case"yi":case"zu":return e===1?0:1;case"":case"bo":case"dz":case"fa":case"gn":case"hu":case"id":case"ja":case"jv":case"ko":case"ms":case"my":case"om":case"su":case"th":case"tr":case"tt":case"vi":case"yo":case"zh":return 0;case"br":case"fr":case"fil":case"hy":case"pt":case"ti":case"wa":return e>1?1:0;case"dv":case"ga":case"gv":case"iu":case"mi":case"sa":case"se":switch(e){case 1:return 0;case 2:return 1;default:return 2}case"be":case"bs":case"hr":case"ru":case"sr":case"uk":if(e%10===1&&e%100!==11){return 0}else if(e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)){return 1}else{return 2}case"cs":case"sk":switch(e){case 1:return 0;case 2:case 3:case 4:return 1;default:return 2}case"ar":if(e===0){return 0}else if(e===1){return 1}else if(e===2){return 2}else if(e%100>=3&&e%100<=10){return 3}else if(e%100>=11){return 4}else{return 5}case"cy":switch(e){case 0:return 0;case 1:return 1;case 2:case 3:case 4:case 5:return 2;case 6:return 3;default:return 4}case"gd":if(e===1||e===11){return 0}else if(e===2||e===12){return 1}else if(e>2&&e<20){return 2}else{return 3}case"is":if(e%10===1&&e%100!==11){return 0}else{return 1}case"lt":if(e%10===1&&e%100!==11){return 0}else if(e%10>=2&&(e%100<10||e%100>=20)){return 1}else{return 2}case"lv":if(e%10===1&&e%100!==11){return 0}else if(e!==0){return 1}else{return 2}case"mk":switch(e%100){case 1:return 0;case 2:return 1;default:return 2}case"mt":if(e===1){return 0}else if(e===0||e%100>=1&&e%100<=10){return 1}else if(e%100>=11&&e%100<=19){return 2}else{return 3}case"pl":if(e===1){return 0}else if(e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)){return 1}else{return 2}case"ro":if(e===1){return 0}else if(e===0||e%100>0&&e%100<20){return 1}else{return 2}case"sl":switch(e%100){case 1:return 0;case 2:return 1;case 3:case 4:return 2;default:return 3}default:return null}}}QTranslator=typechecked(QTranslator);export class QCoreApplication extends QObject{static installTranslator(e/*: QTranslator */){if(translators.includes(e)){return false}translators.push(e);return true}static removeTranslator(t/*: QTranslator */){const e=translators.length;translators=translators.filter(e=>e!==t);return translators.length<e}}QCoreApplication=typechecked(QCoreApplication);Object.defineProperty(String.prototype,"arg",{value:function(...s){return this.replace(/%([0-9])/g,(e,t)=>s[t-1]??e)}});